% NÃO altere as predefinições desse template!

\documentclass{ceel}

% ===========================
%Coloque aqui pacotes adicionais, se necessário
\usepackage{verbatim}
\usepackage{subfig}
%\usepackage{caption}
%\usepackage{subcaption}
\usepackage{hyperref}%
\usepackage{array}
\usepackage{booktabs}
\usepackage{float}
%\usepackage{wrapfig}
%%===========================

% Dados do trabalho
\title{Métodos de limiarização de imagem QR Code em distintos padrões de luminosidade}

% Autores: o primeiro será, necessariamente, o apresentador do trabalho
% Caso o trabalho não tenha 8 autores, exclua os campos que não foram preenchidos
\author[1]{\underline{Lesly Viviane Montúfar Berrios}\thanks{leslymontufar@ufu.br}}
\author[2]{Luciano Xavier Medeiros\thanks{lucianox@ufu.br}}
\author[2]{Alexandre Coutinho Mateus\thanks{acmateus@ufu.br}}


% Adicione as instituições de cada autor e indique corretamente no campo acima
\affil[1]{FEELT - Universidade Federal de Uberlândia}
\affil[2]{FEELT - Professor Adjunto - Universidade Federal de Uberlândia}

\begin{document}

\inserirtitulo

\begin{multicols}{2}

% Adicione o Resumo do seu trabalho no campo abaixo, com início em "O objetivo [...]"
\textbf{\emph{Resumo} - Este artigo propõe três métodos de binarização para imagens de QR Codes sujeitos a diferentes padrões de luminosidade e, subsequentemente, a análise de eficiência de cada técnica desenvolvida. Sabe-se que, intrínseco ao processo de reconhecimento do um símbolo QR, é necessária a aplicação de uma técnica de binarização, a qual é influenciada pela iluminação ambiente. Sob essa perspectiva, é de interesse avaliar quais seriam os métodos ótimos considerando-se as peculiaridades do ambiente de captura da imagem.}
\vspace*{10pt}

%Adicione as palabras-chave do seu trabalho abaixo
\textbf{\emph{Palavras-Chave} - Análise de eficiência, binarização, imagem, luminosidade, QR Code.}


\begin{center}
%Insira aqui o Título do trabalho em inglês
\noindent\textbf{\large \uppercase{Thresholding methods of QR Code images in different brightness patterns}}
\end{center}

%Insira aqui o resumo do seu trabalho em inglês 
\textbf{\emph{Abstract} - This paper proposes three binarization methods for QR Codes images subjected to different light patterns and, subsequently, the efficiency analysis of each developed technique. It is known that, intrinsic to the recognition process of a QR symbol, it is necessary to apply a binarization technique, which is influenced by ambient lighting. From this perspective, it is of interest to evaluate which methods would be optimal considering the peculiarities of the image capture environment.} 
\vspace*{10pt}

%Insira aqui as palavras-chave do seu trabalho em inglês
\textbf{\emph{Keywords} - Brightness, efficiency analysis, image, QR Code, thresholding.}

%Introdução: Caso queira pode mudar o título da seção para qualquer outro. Dentro das chaves insira o título da seção e abaixo insira o texto da mesma.
\section{Introdução}
Com surgimento no Japão em 1994, os Quick Response Codes (QR Codes) são marca registrada da empresa Denso-Wave Incorporated, uma subsidiária da Toyota, cujo propósito de criação estava em facilitar o processo de catalogação de componentes automobilísticos \cite{denso}. Entretanto, sua utilização não se ateve a essa finalidade, devido à grande velocidade em que podem ser lidos e decodificados eletronicamente. Além disso, é uma ferramenta que tem sido bastante difundida mundialmente, em virtude do rápido desenvolvimento de dispositivos portáteis capazes de ler QR Codes e ao crescente uso comercial associado, em especial, à área de marketing.

Em termos práticos, a utilização de telefones celulares, câmeras digitais ou outros equipamentos para a coleta da imagem de código QR pode apresentar empecilhos significantes para o reconhecimento do símbolo, ocasionados tanto por fatores do ambiente, quanto pela forma de manuseio do usuário. Sob essa perspectiva, o ambiente de captura mostra-se como aspecto de bastante relevância e associa-se, principalmente, às irregularidades da iluminação. Outrossim, o manuseio do equipamento pelo usuário pode provocar distorção geométrica, problemática amenizada como propõe, por exemplo, 
Wei et al. \cite{jin-wei}, por meio de um método de correção de imagem
de código QR com base em morfologia, que consiste na obteção de informações relativas à geometria de topologia de um conjunto desconhecido a partir de outro conjunto bem definido, e Transformada de Hough, método padrão
para detecção de formas que são facilmente parametrizadas (linhas, círculos, elipses etc) em imagens digitalizadas.

Suran \cite{k-suran} desenvolveu um algoritmo de correção de imagem de código QR baseado em Algoritmo de Detecção de Canto e Casco
Convexo, utilizando binarização localizada e morfologia matemática. Chen et al. \cite{w-chen} apresentou um método de correção
de imagem de código QR de acordo com a fórmula de transformação afim, a qual é frequentemente utilizada para corrigir distorções causadas pela rotação da câmara. Jin et al. \cite{j-chen} propôs algoritmo de correção de
imagem de código QR baseado na transformada wavelet, que consiste basicamente na decomposição dos dados de forma a possibilitar a análise tanto no domínio da frequência quanto no do tempo.

A temática deste artigo, no entanto, contempla os obstáculos devido a padrões de iluminação irregulares. Ademais, deve-se atentar ao tipo de imagem que se espera trabalhar, ou seja, comumente de baixo contraste, o que é relevante na escolha do processamento adequado. Por isso, idealizou-se três métodos baseados na limiariação, os quais foram aplicados e recolhidos dados sobre imagens QR Code expostas a padrões de iluminação diferentes. Dessa maneira, propõe-se verificar o nível de correspondência de imagens de código QR submetidas a métodos de binarização distintos, para assim poder determinar o mais eficiente e estabelecer uma relação com o ambiente de captura.

Na Seção \ref{caracteristicas} serão apresentadas características básicas dos QR Codes. Na Seção \ref{metodologia}, o procedimento realizado para a coleta de imagens e exemplificação do impacto provocado pela iluminação irregular Já na Seção \ref{metodos}, são descritos e exemplificados os algoritmos das técnicas de binarização desenvolvidas, assim como realizada a análise de eficiência para as imagens do exemplo. Finalmente, na Seção \ref{resultados}, discute-se acerca dos resultados obtidos com os métodos propostos neste artigo.

\section{Características dos Códigos QR} \label{caracteristicas}
O codificação QR baseia-se na disposição de pequenos quadrados, normalmente de cores preta e branca. Esses são denominados módulos e possuem certa dimensão em píxel. Tem-se também que o tamanho do código é determinado pelo número de versão, considerando que a Versão 1 possui dimensão de $21\times21$ módulos e para as versões subsequentes há o acréscimo linear de 4 módulos, ou seja, a Versão 2 possui dimensões de 25 x 25, a Versão 3, 29 x 29, e assim por diante. 

QR Codes contém ainda uma técnica de correção de erro, a qual permite a decodificação e obtenção da informação contida numa imagem mesmo que se encontre danificada, devido à inserção de dados redundantes ao código. Logo, quanto maior a capacidade de correção, menor o espaço para o armazenamento de dados. A Tabela \ref{nivel-correcao} descreve os 4 possíveis níveis de correção de erro.

\begin{minipage}[h]{\columnwidth}
\begin{scriptsize}
    \def\arraystretch{1.35}
    \captionsetup{type=table}
    \begin{center}
    \caption{Níveis de Correção de Erro.} \label{nivel-correcao}
    \vspace{-0.2cm}
    \begin{tabular}{ c  c } \toprule
    \textbf{Nível de correção de erro}&  \textbf{Capacidade de correção}\\\midrule
     L & Recupera 7\% dos dados \\
    M & Recupera 15\% dos dados \\
    Q & Recupera 25\% dos dados \\
    H & Recupera 30\% dos dados \\\bottomrule
    \end{tabular}
    \end{center}
\end{scriptsize}
\end{minipage}
\vspace{0.1cm}

Conforme a Figura \ref{regioes}, a estrutura do código constitui-se de duas principais regiões: \textit{região de codificação} e \textit{elementos funcionais}. A região de codificação inclui a \textit{Format Information} e \textit{Version Information}, além das \textit{Data Codewords} e \textit{Error Correction Codewords}. Já os elementos funcionais são compostos pelo \textit{Finder Patterns}, \textit{Separator}, \textit{Timing Patterns} e \textit{Alignment Patterns}. Assim, quando uma imagem de QR Code é capturada, busca-se por esses padrões para o reconhecimento e decodificação rápida dos dados \cite{qr-tutorial}.


\section{Metodologia} \label{metodologia}

\subsection{Coleta das imagens QR Code}
Foram gerados 13 QR Codes, de versões e níveis de correção de erro distintos (Veja Tabela \ref{qrtable}), que foram impressos em folhas A4, sendo 4 imagens por página só frente, fato que influencia no tamanho da imagem a ser coletada, por conseguinte, em sua resolução. Em seguida, buscou-se locais com diferentes padrões de luminosidade, a fim de simular variadas situações problema enfrentadas pela tecnologia de reconhecimento.

\hspace{-0.45cm}
\begin{minipage}[h]{\columnwidth}
%\captionsetup{type=figure, singlelinecheck=off, justification=raggedright, margin=0pt, font=footnotesize}
\captionsetup{type=figure, margin=5pt}
\includegraphics[width=\columnwidth]{regioes-qr-upercase}
\caption{\label{regioes}Regiões de um QR Code, ilustrado em símbolo da Versão 7 \cite{chines}.} 
\end{minipage}
\vspace{0.25cm}

Escolhidos três ambientes, utilizou-se a camêra de um celular (\emph{Samsung SM-J730G}) de $13\ Mpx$ para realizar a captura dos QR Codes impressos. Assim, obteve-se 39 imagens no formato \emph{jpg} de resolução  $4128 \times 3096$. 
Na Figura \ref{exemplo} há um exemplo de coleta de imagens de um QR Code em específico, QR Code 3 conforme a Tabela \ref{qrtable}, submetido a três padrões de iluminação. 

Essas imagens exemplo serão base para a discussão e demonstração das técnicas de binarização propostas neste artigo. A partir das Figuras \ref{exemplo}(a) e (b) torna-se evidente que QR Codes expostos a iluminações mais uniformes tendem a apresentar histogramas com dois picos, um representando os módulos mais escuros e o outro, os mais claros. Constata-se ainda, nas Figuras \ref{exemplo}(c) e (d), que imagens advindas de uma iluminação aproximadamente em degradê dispõem de histogramas com mais picos. Observa-se inclusive que a imagem da Figura \ref{exemplo}(e) resulta em um histograma também com dois picos, porém, em virtude da baixa intensidade do nível de cinza médio, há maior concentração de píxeis com intensidade pertencente ao início da escala de cinza, como mostra a Figura \ref{exemplo}(f).

\vspace{0.15cm}
\begin{minipage}[h]{\columnwidth}
\begin{scriptsize}
    \def\arraystretch{1.35}
    \captionsetup{type=table}
    \begin{center}
    \caption{QR Codes gerados.} \label{qrtable}
    \vspace{-0.2cm}
    \begin{tabular}{ c  c   c} \toprule
    \textbf{Nome da Imagem}&  \textbf{Versão}&  \textbf{Nível de Correção de Erro}\\\midrule
    QR Code 1  & 3 & L \\
    QR Code 2  & 4 & L \\
    QR Code 3  & 5 & L \\
    QR Code 4  & 6 & M \\
    QR Code 5  & 8 & H  \\
    QR Code 6  & 8 & Q  \\
    QR Code 7  & 10 & H  \\
    QR Code 8  & 12 & H  \\
    QR Code 9  & 13 & H  \\
    QR Code 10 & 17 & H  \\
    QR Code 11 & 29 & L  \\
    QR Code 12 & 38 & H \\
    QR Code 13 & 39 & Q \\\bottomrule
    \end{tabular}
    \end{center}
\end{scriptsize}
\end{minipage}


\subsection{Procedimento realizado sobre as capturas de imagem}
No fluxograma da Figura \ref{fluxograma}, visualiza-se o procedimento realizado sobre cada imagem capturada, a fim de se obter os resultados da Seção \ref{resultados}. Após a captura da imagem, é realizada a transformação para a escala de cinza, para logo depois reduzir ainda mais o espectro de cores da imagem mediante a aplicação do método de binarização idealizado e descrito na Seção \ref{metodos}. Feito isso, é possível a comparação com o código QR gerado, o que permite gerar as imagens diferença, nas quais os píxeis de divergência entre a imagem gerada e a capturada são marcados na cor vermelha e contabilizados de maneira percentual para cada método (Veja Seção \ref{resultados}).

\hspace{-0.365cm} 
\begin{minipage}[p]{\columnwidth} %%
\captionsetup{type=figure}
\subfloat[Iluminação 1]{\includegraphics[width=3.5cm]{imagem03}}\hfill
\subfloat[Histograma de (a)]{\includegraphics[width=4.52cm]{imagem03-hist}}\\
\subfloat[Iluminação 2]{\includegraphics[width=3.5cm]{imagem16}}\hfill
\subfloat[Histograma de (c)]{\includegraphics[width=4.52cm]{imagem16-hist}}\\
\subfloat[Iluminação 3]{\includegraphics[width=3.5cm]{imagem29}}\hfill
\subfloat[Histograma de (e)]{\includegraphics[width=4.52cm]{imagem29-hist}}
\vspace{-0.05cm}
\caption{Exemplos de imagens de um mesmo QR Code nos três diferentes padrões de iluminação e seus respectivos histogramas.}
\label{exemplo}
\end{minipage}

\vspace{0.5cm}
\begin{minipage}[h]{\columnwidth}
\centering
\captionsetup{type=figure}
\includegraphics[scale=0.58]{Fluxograma}
\caption{Fluxograma do procedimento realizado sobre cada imagem.} \label{fluxograma}
\end{minipage}
%\vspace{0.1cm}

\section{Métodos de Binarização de QR Code} \label{metodos}
A \emph{binarização} ou \emph{limiarização} é uma função de transformação de intensidade baseadas em pontos de corte ou limiares. Dada uma imagem em nível de cinza $f(x, y)$, a binarização, no caso da utilização de somente um limiar $T$ (do inglês \emph{Threshold}), resultará em uma imagem $g(x, y)$  de dois níveis ou binária, descrita matematicamente pela Equação (\ref{Threshold}).

\begin{gather}
g( x,\ y) =\begin{cases}
0 & \quad \quad \text{se }\ f( x,\ y) \leqslant T\\
255 & \quad \quad \text{se }\ f( x,\ y)  >T
\end{cases}
\label{Threshold}
\end{gather}
%\vspace{0.1cm}

onde 0 e 255 são, respectivamente, as cores preta e branca para imagens em níveis de cinza codificadas em 8 bits.\\

São propostos, neste trabalho, os seguintes métodos: \emph{Binarização por Limiar}; \emph{Binarização Pós Equalização por Histograma}; \emph{Binarização em Sub-Regiões}. A seguir, são descritos os métodos desenvolvidos e utiliza-se imagens de um mesmo QR Code para melhor compreensão, as quais apresentam interessantes condições de iluminação (Veja Figura \ref{exemplo}).


\subsection{Binarização por Limiar} \label{Aconst}
O primeiro método proposto neste artigo consiste na binarização da imagem a partir de dois limiares distintos. Um fixo $T_1=128$, valor correspondente à metade da escala de cinza (\textit{Método do Limiar Fixo - LF}), e um variável, obtido a partir da intensidade média de nível de cinza da imagem analisada, $T_2=M$  (\textit{Método do Limiar Variável - LV}). Portanto, tem-se as funções de transformação descritas, respectivamente, pelas Equações (\ref{eqLF}) e (\ref{eqLV}). Assim, as Figuras \ref{figLF} e \ref{figLV} ilustram os resultados obtidos pelos métodos do \emph{Limiar Fixo} e do \emph{Limiar Variável} respectivamente, cujas funções de transformação são descritas pelas Equações (\ref{eqLF}) e (\ref{eqLV}).

\begin{gather}
g_{LF}( x,\ y) =\begin{cases}
0 & \quad \quad \text{se }\ f( x,\ y) \leqslant 128\\
255 & \quad \quad \text{se }\ f( x,\ y)  >128
\end{cases}
\label{eqLF}
\end{gather}

%\vspace{0.02cm}
\begin{gather}
g_{LV}( x,\ y) =\begin{cases}
0 & \quad \quad \text{se }\ f( x,\ y) \leqslant M\\
255 & \quad \quad \text{se }\ f( x,\ y)  >M
\end{cases}
\label{eqLV}
\end{gather}
\vspace{0.03cm}

Observe, na Figura \ref{figLF}(e), que a técnica \emph{LF} sobre a imagem no padrão de Iluminação 3 obteve resultado desvantajoso, uma vez que a baixa iluminação do local levou ao escurecimento total da imagem, o que invialibiliza o reconhecimento do símbolo. Infere-se, assim, que a intensidade de todos os pixeis da imagem são inferiores a 128. Já na Figura \ref{figLV}(e), a técnica \emph{LV} revelou menor erro para esse padrão e, agora, é visível o símbolo QR (Veja Tabela \ref{tabela-erros}). 

\subsection{Binarização Pós Equalização por Histograma (EH)} \label{Bhist}
Outra técnica de binarização proposta por este artigo consiste em duas etapas. Realiza-se, primeiramente, a equalização por histograma da imagem do código QR, por meio da função \emph{histeq()} inclusa no pacote \emph{image} do \emph{Octave}, para, em seguida, %%CONTINUA


\hspace{-0.43cm}
\begin{minipage}[h]{\columnwidth}
\captionsetup{type=figure}
\subfloat[]{\includegraphics[width=3.68cm]{imagem03-LF}} \hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem03-LF-diff}}\\
\subfloat[]{\includegraphics[width=3.68cm]{imagem16-LF}}\hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem16-LF-diff}}\\
\subfloat[]{\includegraphics[width=3.68cm]{imagem29-LF}} \hfill 
\subfloat[]{\includegraphics[width=3.68cm]{imagem29-LF-diff}}
\vspace{-0.1cm}
\caption{Imagens resultantes da Binarização com Limiar Fixo para o QR Code 3 nos padrões de (a) Iluminação 1, (c) Iluminação 2 e (e) Iluminação 3, com suas respectivas imagens diferença em (b), (d) e (f).} \label{figLF}
\end{minipage}

\vspace{0.4cm}
\noindent aplicar a binarização com limiar correspondente a intensidade média de nível de cinza  $M$ da imagem equalizada. Na Figura \ref{figEH} estão os resultados proporcionados por essa técnica. %% CONTINUACAO

De acordo com Gonzalez e Woods \cite{gonzales}, a equalização de histograma tem como objetivo redistribuir os valores de níveis de cinza do píxeis, de forma a obter uma melhora no contraste da imagem. Assim, a equalização da imagem resultará em uma intensidade média $M$ distinta, a qual pode adequar-se melhor ou não aos propósitos da binarização. Na Figura \ref{imagemEH}, observa-se o espalhamento das barras do histograma sobre a escala de cinza após a equalização. Nesse exemplo é utlizada a imagem do QR Code 1 no padrão de Iluminação 2, na qual a técnica \emph{EH} obteve resultado ótimo (Veja Tabela \ref{tabP2}).

\subsection{Binarização em Sub-Regiões (S)} \label{Cdiv} 
O último método proposto neste artigo consiste em, primeiramente, subdividir a imagem em $n$ regiões retangulares, assim cada uma pode ser binarizada utilizando a intensidade média $M$ como limiar, para depois unirem-se em uma imagem só binarizada. Escolheu-se $n=9$, quantidade considerada suficiente para observar o efeito desse método sobre as capturas de
de imagem QR Code.
%% CONTINUA

\hspace{-0.38cm}
\begin{minipage}[b]{\columnwidth}
\captionsetup{type=figure}
\subfloat[]{\includegraphics[width=3.68cm]{imagem03-LV}} \hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem03-LV-diff}} \\
\subfloat[]{\includegraphics[width=3.68cm]{imagem16-LV}}\hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem16-LV-diff}}\\
\subfloat[]{\includegraphics[width=3.68cm]{imagem29-LV}} \hfill 
\subfloat[]{\includegraphics[width=3.68cm]{imagem29-LV-diff}}
\vspace{-0.1cm}
\caption{Imagens resultantes da Binarização com Limiar Variável para o QR Code 3 nos padrões de (a) Iluminação 1, (c) Iluminação 2 e (e) Iluminação 3, com suas respectivas imagens diferença em (b), (d) e (f).} \label{figLV}
\end{minipage}

%\vspace{0.05cm}
\hspace{-0.38cm}
\begin{minipage}{\columnwidth}
\captionsetup{type=figure}
\subfloat[]{\includegraphics[width=3.5cm]{imagem14}}\hfill
\subfloat[]{\includegraphics[width=4.52cm]{imagem14-hist}}\\
\subfloat[]{\includegraphics[width=3.5cm]{imagem14-EH-primaria}}\hfill 
\subfloat[]{\includegraphics[width=4.52cm]{imagem14-EH-hist}} 
\vspace{-0.1cm}
\caption{(a) QR Code 1 submetido ao padrão de Iluminação 2, (b) histograma de (a), (c) imagem resultante da equalização de histograma e (d) histograma de (c).}
\label{imagemEH}
\end{minipage}


\hspace{-0.38cm}
\begin{minipage}[h]{\columnwidth}
\captionsetup{type=figure}
\subfloat[]{\includegraphics[width=3.68cm]{imagem03-EH}} \hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem03-EH-diff}} \\
\subfloat[]{\includegraphics[width=3.68cm]{imagem16-EH}}\hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem16-EH-diff}}\\
\subfloat[]{\includegraphics[width=3.68cm]{imagem29-EH}} \hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem29-EH-diff}}
\vspace{-0.1cm}
\caption{Imagens resultantes da Binarização Pós Equalização por Histograma para o QR Code 3 nos padrões de (a) Iluminação 1, (c) Iluminação 2 e (e) Iluminação 3, com suas respectivas imagens diferença em (b), (d) e (f).} \label{figEH}
\end{minipage}

\vspace{0.4cm}
%% CONTINUACAO
 Na Figura \ref{figS} observa-se os resultados obtidos. Ademais, da Tabela \ref{tabela-erros}, afirma-se que obteve baixo nível de erro, com excessão da imagem no padrão de Iluminação 2, cuja irregulidade acentuada provocou que, na separação, as regiões mais claras fossem mais afetadas pelos níveis de intensidades mais escuros intrínsecos do código.


\subsection{Tabela de erros final para as capturas do QR Code 3}
A aplicação dos diferentes métodos de binarização desenvolvidos e a subsequente comparação com o símbolo QR representado nas imagens de cada padrão permitiu a elaboração da Tabela \ref{tabela-erros}. Nela são contemplados os erros a associados a cada método aplicado aos padrões de Iluminação 1, 2 e 3. 

\vspace{0.4cm}
\begin{minipage}[h]{\columnwidth}
\begin{scriptsize}
\def\arraystretch{1.35}
    \captionsetup{type=table}
    \begin{center}
    \caption{Erros associados às capturas de imagem do QR Code 3} \label{tabela-erros} \vspace{-0.2cm}
    \begin{tabular}{ c  c  c  c } \toprule
    \textbf{Método}&  \textbf{Iluminação 1}& \textbf{Iluminação 2}& \textbf{Iluminação 3}\\\midrule
     LF & 15,27\% & 20,33\% & 49,89\%\\
     LV & 13,97\% & 20,73\% & 34,73\%\\
     EH & 14,26\% & 20,33\% & 34,24\%\\
     S   & 13,66\% & 21,00\% & 23,43\%\\\bottomrule
    \end{tabular}
   \end{center}
\end{scriptsize}
\end{minipage}

% imagem monocromatica = ou em escala de cinza
\hspace{-0.38cm}
\begin{minipage}[h]{\columnwidth}
\captionsetup{type=figure}
\subfloat[]{\includegraphics[width=3.68cm]{imagem03-S}}\hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem03-S-diff}} \\
\subfloat[]{\includegraphics[width=3.68cm]{imagem16-S}}\hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem16-S-diff}}\\
\subfloat[]{\includegraphics[width=3.68cm]{imagem29-S}}\hfill
\subfloat[]{\includegraphics[width=3.68cm]{imagem29-S-diff}}
\vspace{-0.1cm}
\caption{Imagens resultantes da Binarização em Sub-regiões para o QR Code 3 nos padrões de (a) Iluminação 1, (c) Iluminação 2 e (e) Iluminação 3, com suas respectivas imagens diferença em (b), (d) e (f).} \label{figS}
\end{minipage}

\section{Análise dos resultados} \label{resultados}
Aplicando-se o processo descrito no fluxograma da Figura \ref{fluxograma} para as imagens coletadas obtém-se os resultados das Tabelas \ref{tabP1}, \ref{tabP2} e \ref{tabP3}, as quais informam os erros associados aos métodos aplicados e o método ótimo, ou seja com menor erro, para as imagens dos padrões de Iluminação 1, 2 e 3. 

A respeito dos métodos de binarização por limiar, verifica-se a inexistência de relação fixa de eficácia entre eles, já que nem sempre a aplicação do método \emph{LV} trará melhor resultado que o \emph{LF}. Deve considerar-se que os píxeis pretos intrínsecos ao código afetam na determinação da intensidade média $M$ da imagem utilizada para a binarização, por conseguinte, quanto maior o tamanho do símbolo, ou seja maior número de versão, maior será a quantidade de píxeis escuros instrínsecos ao código que influenciarão $M$. Para essas situações \emph{LF} pode ser método ótimo ou pelo menos superior a \emph{LV}, o que se confere nos resultados da Tabela \ref{tabP2} para as imagens de QR Codes de versões elevadas do padrão de Iluminação 2.

Note também que analisando imagem a imagem, os valores percentuais de erro concentram-se em intervalos bem definidos para os padrões Iluminação 1 e 2, haja vista que as intensidades dos píxeis encontram-se melhor distribuídas ao longo da escala de cinza, como se verifica nos histogramas da Figura \ref{exemplo}. Esse comportamento não ocorre para o padrão de Iluminação 3, pois, devido à sua natureza escura, técnicas que envolvem somente uma etapa, como como \emph{LF} e \emph{LV}, são insatisfatórias, já que é necessário primeiro otimização do contraste da imagem, seja por meio da equalização de histograma ou pela análise em subregiões, das quais, individualmente, espera-se melhor distribuição das intensidades dos píxeis.

\vspace{0.4cm}
\hspace{-0.38cm}
\begin{minipage}[h]{\columnwidth}
\begin{scriptsize} 
\def\arraystretch{1.38}
\captionsetup{type=table}
\caption{Erro percentual de cada método aplicado e método ótimo para as imagens de QR Code submetidas ao padrão de Iluminação 1.} \label{tabP1} \vspace{-0.2cm}
\resizebox{\textwidth}{!}{ %
\begin{tabular}{c c c c c c} \toprule
\textbf{Nome do QR Code}&\textbf{LF(\%)}&\textbf{LV(\%)}&\textbf{ EH(\%)}&\textbf{S(\%)}&\textbf{Método Ótimo} \\\midrule
QR Code 1 & 5,45\% & 5,57\% & 7,95\% & 5,60\% & LF \\
QR Code 2 & 11,17\% & 11,14\% & 11,34\% & 11,15\% & LV \\
QR Code 3 & 15,27\% & 13,97\% & 14,26\% & 13,66\% & S \\
QR Code 4 & 38,67\% & 14,20\% & 15,71\% & 14,22\% & LV \\
QR Code 5 & 11,77\% & 12,92\% & 12,16\% & 12,13\% & LF \\
QR Code 6 & 21,00\% & 21,15\% & 21,03\% & 21,11\% & LF \\
QR Code 7 & 31,53\% & 30,97\% & 31,36\% & 31,57\% & LV \\
QR Code 8 & 40,00\% & 35,81\% & 35,79\% & 36,53\% & EH \\
QR Code 9 & 8,83\% & 7,65\% & 9,83\% & 7,64\% & S \\
QR Code 10 & 27,59\% & 25,63\% & 26,40\% & 27,99\% & LV \\
QR Code 11 & 47,86\% & 47,59\% & 47,28\% & 47,77\% & EH \\
QR Code 12 & 47,62\% & 45,32\% & 45,22\% & 45,29\% & EH \\
QR Code 13 & 34,76\% & 28,69\% & 28,83\% & 29,29\% & LV \\\bottomrule
\end{tabular}%
}
\end{scriptsize}
\end{minipage}

\vspace{0.5cm}
\hspace{-0.38cm}
\begin{minipage}[h]{\columnwidth}
\begin{scriptsize} 
\def\arraystretch{1.35}
\captionsetup{type=table}
\caption{Erro percentual de cada método aplicado e método ótimo para as imagens de QR Code submetidas ao padrão de Iluminação 2.} \label{tabP2} \vspace{-0.2cm}
\resizebox{\textwidth}{!}{ %
\begin{tabular}{c c c c c c} \toprule
\textbf{Nome do QR Code}&\textbf{LF(\%)}&\textbf{LV(\%)}&\textbf{ EH(\%)}&\textbf{S(\%)}&\textbf{Método Ótimo} \\\midrule
QR Code 1 & 10,97\% & 10,97\% & 10,78\% & 10,98\% & EH \\
QR Code 2 & 7,43\% & 7,86\% & 7,60\% & 7,99\% & LF \\
QR Code 3 & 20,33\% & 20,73\% & 20,33\% & 21,00\% & LF \\
QR Code 4 & 21,02\% & 20,75\% & 19,91\% & 21,24\% & EH \\
QR Code 5 & 44,49\% & 38,11\% & 37,88\% & 38,73\% & EH \\
QR Code 6 & 22,23\% & 24,32\% & 24,10\% & 25,28\% & LF \\
QR Code 7 & 25,61\% & 25,97\% & 25,68\% & 26,26\% & LF \\
QR Code 8 & 34,25\% & 26,02\% & 26,04\% & 24,43\% & S \\
QR Code 9 & 37,59\% & 38,72\% & 38,72\% & 38,98\% & LF \\
QR Code 10 & 22,32\% & 22,45\% & 22,51\% & 21,76\% & S \\
QR Code 11 & 45,92\% & 45,91\% & 45,88\% & 45,61\% & S \\
QR Code 12 & 35,88\% & 35,85\% & 36,55\% & 35,39\% & S \\
QR Code 13 & 47,12\% & 51,13\% & 49,16\% & 49,05\% & LF \\\bottomrule
\end{tabular}%
}
\end{scriptsize}
\end{minipage}

\vspace{0.5cm}
\hspace{-0.38cm}
\begin{minipage}[h]{\columnwidth}
\begin{scriptsize} 
\def\arraystretch{1.35}
\captionsetup{type=table}
\caption{Erro percentual de cada método aplicado e método ótimo para as imagens de QR Code submetidas ao padrão de Iluminação 3.} \label{tabP3} \vspace{-0.2cm}
\resizebox{\textwidth}{!}{ %
\begin{tabular}{c c c c c c} \toprule
\textbf{Nome do QR Code}&\textbf{LF(\%)}&\textbf{LV(\%)}&\textbf{ EH(\%)}&\textbf{S(\%)}&\textbf{Método Ótimo} \\\midrule
QR Code 1 & 50,18\% & 12,95\% & 19,76\% & 10,08\% & S \\
QR Code 2 & 50,14\% & 17,52\% & 19,01\% & 16,21\% & S \\
QR Code 3 & 49,89\% & 34,73\% & 34,24\% & 23,43\% & S \\
QR Code 4 & 50,92\% & 22,52\% & 22,43\% & 11,45\% & S \\
QR Code 5 & 49,10\% & 37,85\% & 37,80\% & 22,38\% & S \\
QR Code 6 & 49,44\% & 31,20\% & 31,58\% & 20,69\% & S \\
QR Code 7 & 48,97\% & 34,08\% & 34,11\% & 31,68\% & S \\
QR Code 8 & 48,47\% & 19,39\% & 11,75\% & 12,04\% & EH \\
QR Code 9 & 49,76\% & 26,38\% & 21,33\% & 27,20\% & EH \\
QR Code 10 & 48,68\% & 25,77\% & 25,27\% & 23,97\% & S \\
QR Code 11 & 50,53\% & 46,09\% & 46,09\% & 41,15\% & S \\
QR Code 12 & 49,33\% & 38,25\% & 45,57\% & 47,12\% & LV \\
QR Code 13 & 49,12\% & 45,98\% & 44,43\% & 28,88\% & S \\\bottomrule
\end{tabular}%
}
\end{scriptsize}
\end{minipage}

\section{CONCLUSÕES}
A tecnologia de reconhecimento de QR Code enfrenta problemas significativos provocados principalmente pelo ambiente de filmagem, a exemplo disso cita-se a iluminação irregular no momento da captura da imagem. Por isso, é necessária a aplicação de um método de binarização, nesse sentido, no artigo foram desenvolvidos e propostos três alternativas para esse processamento. Submetendo-se capturas de símbolos QR em três distintos padrões de luminosidade aos métodos desenvolvidos, observou-se a melhor eficácia de métodos que levavam em consideração características mais gerais sobre padrões mais claros, como os \emph{Métodos LF} e \textit{LV}, enquanto que para iluminações de irregularidade extrema ou escuras, métodos preconizando etapas otimização de contraste (\emph{Métodos EH}) ou de binarização localizada (\emph{Métodos S}) foram mais eficazes, pois proporcionaram, à binarização, um limiar mais adequado.

%==================================
% REFERÊNCIAS
%==================================
\begin{thebibliography}{9} % apague as linhas abaixo e insira aqui bibliografia

\bibitem{denso}	
    DENSO WAVE Incorporated,
    “Basic Info”. 
    Disponível em \url{http://www.denso-wave.com/en/adcd/fundamental/index.html}. Acesso em jun. 2019.

\bibitem{jin-wei}
J. W. Wei, S. G. Dai, P. A. Mu, 
"QR code correction and positioning method based on morphology and Hough transform", 
\emph{Computer and Information
Technology}, Shanghai, China, 2010.

\bibitem{k-suran}
K. Suran, 
"QR Code Image Correction based on Corner Detection and Convex Hull Algorithm". 
\emph{Journal of Multimedia}, Zhejiang, China, 2013.

\bibitem{w-chen}
 W. B. Chen, G. B. Yang, L. Feng, 
"A low complexity image preprocessing method for QR code recognition", 
\emph{Journal of Hunan University}, Hunan, China, 2012.

\bibitem{j-chen}
C. Jin, J. H. Yuan, L. L. Li, E. Y. Chen, G. Han, T. Tang, 
"One of the image correction algorithms of QR code and its implementation
based on wavelet transform".
\emph{2012 IEEE 3rd International Conference on
Software Engineering and Service Science}, Chongqing, China, 2012.

\bibitem{chines}
  M. Li, P. Cao, L. Feng, L. Yu, J. Chen, J. Wang,
   “The research of QR code image correction based on image gray feature”,
   \emph{ 2017 First International Conference on Electronics Instrumentation \& Information Systems (EIIS)}, Harbin, China, June 2017.



\bibitem{qr-tutorial}
	"QR Code Tutorial", 2015.
	Disponível em \url{https://www.thonky.com/qr-code-tutorial/}. Acesso em jul. 2019.

\bibitem{octave}
"Octave Forge". 
Disponível em \url{https://octave.sourceforge.io/}. Acesso em jul. 2019.

\bibitem{gonzales}	
    R. C. Gonzales, R. E. Woods,
    “Processamento Digital de Imagens”, 
    3. ed. , São Paulo, Pearson Prentice Hall, 2010.

\end{thebibliography}

%--- FIM ---

\end{multicols}
\end{document}
